//object of wiki items
var countries = [];

//get all countries
$.get("http://taxo.drilobase.org/index.php?title=Location", function(data) {            
  //get items from site
  var rows = $(data).find(".mw-content-ltr li");

  //add each item to the array
  rows.each(function() {
    var country = {};

    //get item name
    var name = $(this).text();
    var formattedName = name.replace(" ", "_");
    
    //get species data
    $.get("http://taxo.drilobase.org/index.php?title=" + formattedName, function(speciesData) { 
      var species = [];

      var speciesRows = $(speciesData).find(".mw-content-ltr li");

      //add each item to the array
      speciesRows.each(function() {
        species.push($(this).text());
        console.log("test");
      });

      country = {
        name: name,
        species: species
      };

      //add wiki item to array
      countries.push(country);
      
      var json = JSON.stringify(countries);

      $(".data").text(json);
    });
  });
});